<%- include("partials/header.ejs") %>

<div class="container py-4">
  <div class="main-card">
    <h1 class="mb-4 text-center page-title">
      <span class="quill-icon">âœ’</span>
      Quote Finder
    </h1>

    <!-- search w keyword -->
    <form action="/searchByKeyword" method="GET" class="mb-4">
      <label class="form-label fw-semibold">Search by keyword</label>
      <div class="d-flex flex-wrap gap-2">
        <input type="text" name="keyword" class="form-control flex-grow-1" placeholder="e.g. life, success, world">
        <button class="btn btn-primary">Search</button>
      </div>
    </form>

    <!-- search w author -->
    <form action="/searchByAuthor" method="GET" class="mb-4">
      <label class="form-label fw-semibold">Search by author</label>
      <div class="d-flex flex-wrap gap-2">
        <select name="authorId" class="form-select flex-grow-1">
          <% for (let a of authors) { %>
            <option value="<%= a.authorId %>">
              <%= a.firstName %> <%= a.lastName %>
            </option>
          <% } %>
        </select>
        <button class="btn btn-secondary">Search</button>
      </div>
    </form>

    <!-- search w category -->
    <form action="/searchByCategory" method="GET" class="mb-4">
      <label class="form-label fw-semibold">Search by category</label>
      <div class="d-flex flex-wrap gap-2">
        <select name="category" class="form-select flex-grow-1">
          <% for (let c of categories) { %>
            <option value="<%= c.category %>"><%= c.category %></option>
          <% } %>
        </select>
        <button class="btn btn-info text-white">Search</button>
      </div>
    </form>

    <!-- search w likes -->
    <form action="/searchByLikes" method="GET" class="mb-2">
      <label class="form-label fw-semibold">Search by likes</label>
      <div class="d-flex flex-wrap align-items-center gap-2">
        <span>Between</span>
        <input type="number" name="minLikes" class="form-control likes-input" placeholder="min">
        <span>and</span>
        <input type="number" name="maxLikes" class="form-control likes-input" placeholder="max">
        <button class="btn btn-warning">Search</button>
      </div>
      <small class="text-muted">Tip: most popular quotes between 50 - 150.</small>
    </form>
  </div>
</div>

    <!-- admin buttons -->
    <div class="mt-5">
      <h2 class="h5 text-center mb-3">Admin: Manage Authors &amp; Quotes</h2>
      <div class="d-flex flex-wrap justify-content-center gap-2">
        <a href="/author/new" class="btn btn-outline-light">Add Author</a>
        <a href="/quote/new" class="btn btn-outline-light">Add Quote</a>
        <a href="/authors" class="btn btn-outline-light">List Authors</a>
        <a href="/quotes" class="btn btn-outline-light">List Quotes</a>
      </div>
    </div>

<!-- Author Information Modal -->
<div class="modal fade" id="authorModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Author Information</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"></button>
      </div>

      <div class="modal-body" id="authorInfo">
        <!-- scripts.js will inject the author details here -->
      </div>

      <div class="modal-footer">
        <button
          type="button"
          class="btn btn-secondary"
          data-bs-dismiss="modal">
          Close
        </button>
      </div>
    </div>
  </div>
</div>

<%- include("partials/footer.ejs") %>
